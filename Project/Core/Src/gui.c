/*
 * gui.c
 *
 *  Created on: Nov 30, 2023
 *      Author: Juan Felipe Ordóñez
 */

#include "main.h"
#include "ssd1306.h"
#include "ssd1306_conf.h"
#include "ssd1306_fonts.h"
#include <string.h>
#include <stdio.h>

// Constants
#define MIN_BPM_THRESHOLD 90
#define MAX_BPM_THRESHOLD 60
#define MIN_BPM_THRESHOLD_0 95
#define MAX_BPM_THRESHOLD_0 70

// Creation of bit maps for each case of patient health
const unsigned char excellent_result[] = {
		0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xf7,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xf7,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xef,0xff,0xfb,0xff,0xfb,0xff,0xff,0xe0
		,0xff,0xff,0xdb,0xff,0xfb,0xff,0xf4,0xff,0xff,0xe0
		,0xff,0xff,0xbd,0xff,0xfb,0xff,0xdf,0xff,0xff,0xe0
		,0xff,0xff,0x7e,0xff,0xeb,0xff,0xbf,0x7f,0xff,0xe0
		,0xff,0xff,0xff,0x7f,0xe7,0xff,0x7f,0xbf,0xff,0xe0
		,0xff,0xfe,0xff,0xbf,0xe3,0xfe,0xff,0xbf,0xff,0xe0
		,0xff,0xff,0xff,0xdf,0xa7,0xfe,0xbb,0xdf,0xff,0xe0
		,0xff,0xfd,0xf7,0xff,0x63,0xfd,0xf7,0xff,0xff,0xe0
		,0xff,0xfb,0xde,0xef,0x85,0xff,0xfd,0xef,0xff,0xe0
		,0xff,0xfb,0xff,0x7f,0x80,0xfd,0x5f,0xf7,0xff,0xe0
		,0xff,0xf7,0xef,0xdf,0xc1,0xfd,0xfb,0xf7,0xff,0xe0
		,0xff,0xef,0xeb,0xdf,0xc9,0xfe,0xb3,0xfb,0xff,0xe0
		,0xff,0xef,0xeb,0xbf,0xc9,0xfe,0xfd,0xfd,0xff,0xe0
		,0xff,0xdf,0xd5,0xff,0xf9,0xff,0x79,0xfe,0xff,0xe0
		,0xff,0xbf,0xd8,0x7f,0xfd,0xff,0x87,0xff,0xff,0xe0
		,0xff,0x7f,0xff,0xff,0xfd,0xff,0xfe,0xff,0x7f,0xe0
		,0xff,0xff,0xff,0xe7,0xfb,0xfb,0xfe,0xff,0xbf,0xe0
		,0xfe,0xff,0xfe,0x7c,0x7b,0x9f,0x3e,0xff,0xbf,0xe0
		,0xfe,0xff,0xf9,0xff,0xbe,0x7f,0xee,0xff,0xff,0xe0
		,0xff,0xff,0xb7,0xff,0xcd,0xff,0xf6,0xff,0xdf,0xe0
		,0xfd,0xff,0x8f,0x3f,0xf3,0xfe,0x3a,0xff,0xdf,0xe0
		,0xfd,0xff,0xed,0xef,0xff,0xf9,0xcb,0x7f,0xff,0xe0
		,0xfd,0xff,0xf3,0xf7,0xff,0xf7,0xf7,0xdf,0xff,0xe0
		,0xfd,0xfd,0xff,0xff,0xff,0xff,0xff,0xdf,0xff,0xe0
		,0xfd,0xfd,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xfd,0xfd,0xff,0xff,0xff,0xff,0xff,0xef,0xff,0xe0
		,0xfd,0xfb,0xff,0xff,0xff,0xff,0xff,0xef,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xef,0xe0
		,0xfb,0xff,0x8f,0xff,0xff,0xff,0xf8,0x7f,0xef,0xe0
		,0xfd,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xfe,0xff,0xfb,0xff,0xff,0xff,0xff,0xff,0xdf,0xe0
		,0xff,0x3f,0xfd,0xff,0xff,0xff,0xcf,0xff,0x3f,0xe0
		,0xff,0x83,0xfe,0x0f,0xff,0xfc,0x3f,0xe0,0xff,0xe0
		,0xff,0xdf,0xff,0xff,0xff,0xff,0xff,0xfd,0xff,0xe0
		,0xff,0xef,0xff,0xff,0xff,0xff,0xff,0xfd,0xff,0xe0
		,0xff,0xf7,0xff,0xff,0xff,0xff,0xff,0xf3,0xff,0xe0
		,0xff,0xf9,0xfd,0xff,0xff,0xff,0xdf,0xef,0xff,0xe0
		,0xff,0xfe,0x03,0xff,0xff,0xff,0xe0,0x3f,0xff,0xe0
		,0xff,0xff,0xdf,0xff,0xff,0xff,0xed,0xff,0xff,0xe0
		,0xff,0xff,0xdd,0xff,0xff,0xff,0xdd,0xff,0xff,0xe0
		,0xff,0xff,0xef,0xff,0xff,0xff,0xdd,0xff,0xff,0xe0
		,0xff,0xff,0xee,0xff,0xff,0xff,0xfb,0xff,0xff,0xe0
		,0xff,0xff,0xf7,0xff,0xff,0xff,0xbb,0xff,0xff,0xe0
		,0xff,0xff,0xf7,0x7f,0xff,0xff,0xf7,0xff,0xff,0xe0
		,0xff,0xff,0xfb,0xff,0xff,0xff,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xef,0xff,0xff,0xe0
		,0xff,0xff,0xfd,0xff,0xff,0xff,0xdf,0xff,0xff,0xe0
		,0xff,0xff,0xfe,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0x7f,0xff,0xff,0xbf,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xbf,0xff,0xff,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xdf,0xff,0xfe,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xef,0xff,0xfd,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xf7,0xff,0xfb,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xfb,0xff,0xf7,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xfd,0xff,0xcf,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xfe,0xff,0xbf,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0x7f,0x7f,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0x9e,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xe9,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xf7,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0

};

const unsigned char good_result[] = {
		0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xfe,0x00,0x0f,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xf0,0x3f,0x81,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xc3,0xff,0xf8,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0x0f,0xff,0xff,0x1f,0xff,0xff,0xe0
		,0xff,0xff,0xfe,0x3f,0xff,0xff,0x8f,0xff,0xff,0xe0
		,0xff,0xff,0xfc,0xff,0xff,0xff,0xe7,0xff,0xff,0xe0
		,0xff,0xff,0xf9,0xff,0xff,0xff,0xf3,0xff,0xff,0xe0
		,0xff,0xff,0xf3,0xff,0xff,0xff,0xf9,0xff,0xff,0xe0
		,0xff,0xff,0xe7,0xff,0xff,0xff,0xfc,0xff,0xff,0xe0
		,0xff,0xff,0xcf,0xff,0xff,0xff,0xfe,0x7f,0xff,0xe0
		,0xff,0xff,0x9f,0xff,0xff,0xff,0xff,0x3f,0xff,0xe0
		,0xff,0xff,0x3f,0xf9,0xff,0xcf,0xff,0x9f,0xff,0xe0
		,0xff,0xff,0x3f,0xf0,0xff,0xc7,0xff,0xdf,0xff,0xe0
		,0xff,0xfe,0x7f,0xf0,0xff,0x87,0xff,0xcf,0xff,0xe0
		,0xff,0xfe,0xff,0xf0,0xff,0x83,0xff,0xef,0xff,0xe0
		,0xff,0xfc,0xff,0xf0,0xff,0x87,0xff,0xe7,0xff,0xe0
		,0xff,0xfd,0xff,0xf8,0xff,0xc7,0xff,0xf7,0xff,0xe0
		,0xff,0xf9,0xff,0xff,0xff,0xff,0xff,0xf3,0xff,0xe0
		,0xff,0xf9,0xff,0xff,0xff,0xff,0xff,0xf3,0xff,0xe0
		,0xff,0xfb,0xff,0xff,0xff,0xff,0xff,0xfb,0xff,0xe0
		,0xff,0xfb,0xff,0xff,0xff,0xff,0xff,0xfb,0xff,0xe0
		,0xff,0xf3,0xff,0xff,0xff,0xff,0xe7,0xf9,0xff,0xe0
		,0xff,0xf3,0xff,0xff,0xff,0xff,0xe3,0xf9,0xff,0xe0
		,0xff,0xf3,0xfe,0xff,0xff,0xff,0xe0,0xf9,0xff,0xe0
		,0xff,0xf3,0xfc,0xff,0xff,0xff,0xf0,0xf9,0xff,0xe0
		,0xff,0xf3,0xf8,0xff,0xff,0xff,0xe3,0xfd,0xff,0xe0
		,0xff,0xf3,0xe0,0xff,0xff,0xff,0xe7,0xfd,0xff,0xe0
		,0xff,0xf3,0xe0,0xff,0xff,0xff,0xe7,0xfd,0xff,0xe0
		,0xff,0xf3,0xfc,0xff,0xff,0xff,0xcf,0xf9,0xff,0xe0
		,0xff,0xf3,0xfe,0x7f,0xff,0xff,0x8f,0xf9,0xff,0xe0
		,0xff,0xf3,0xfe,0x3f,0xff,0xff,0x9f,0xf9,0xff,0xe0
		,0xff,0xf3,0xff,0x1f,0xff,0xff,0x1f,0xf9,0xff,0xe0
		,0xff,0xfb,0xff,0x8f,0xff,0xfe,0x3f,0xfb,0xff,0xe0
		,0xff,0xfb,0xff,0xc7,0xff,0xfe,0x7f,0xfb,0xff,0xe0
		,0xff,0xf9,0xff,0xe3,0xff,0xfc,0xff,0xf3,0xff,0xe0
		,0xff,0xf9,0xff,0xf8,0xff,0xf1,0xff,0xf3,0xff,0xe0
		,0xff,0xfd,0xff,0xfc,0x3f,0xc3,0xff,0xf7,0xff,0xe0
		,0xff,0xfc,0xff,0xff,0x00,0x07,0xff,0xe7,0xff,0xe0
		,0xff,0xfe,0xff,0xff,0xc0,0x1f,0xff,0xef,0xff,0xe0
		,0xff,0xfe,0x7f,0xff,0xff,0xff,0xff,0xcf,0xff,0xe0
		,0xff,0xff,0x3f,0xff,0xff,0xff,0xff,0x9f,0xff,0xe0
		,0xff,0xff,0x3f,0xff,0xff,0xff,0xff,0x9f,0xff,0xe0
		,0xff,0xff,0x9f,0xff,0xff,0xff,0xff,0x3f,0xff,0xe0
		,0xff,0xff,0xcf,0xff,0xff,0xff,0xfe,0x7f,0xff,0xe0
		,0xff,0xff,0xe7,0xff,0xff,0xff,0xfc,0xff,0xff,0xe0
		,0xff,0xff,0xf3,0xff,0xff,0xff,0xf9,0xff,0xff,0xe0
		,0xff,0xff,0xf9,0xff,0xff,0xff,0xf3,0xff,0xff,0xe0
		,0xff,0xff,0xfc,0xff,0xff,0xff,0xe7,0xff,0xff,0xe0
		,0xff,0xff,0xfe,0x3f,0xff,0xff,0x8f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0x8f,0xff,0xfe,0x1f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xc3,0xff,0xf8,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xf0,0x1f,0x01,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0x00,0x0f,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0

};

const unsigned char bad_result[] = {
		0xff,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xe0
		,0xff,0xe0,0x1f,0xff,0xff,0xff,0xff,0xf0,0x3f,0xe0
		,0xff,0xdf,0x0f,0xff,0xff,0xff,0xff,0xc0,0x1f,0xe0
		,0xff,0xdf,0x87,0xff,0xff,0xff,0xff,0x9f,0x8f,0xe0
		,0xff,0xdf,0xc7,0xff,0xff,0xff,0xff,0x7f,0xcf,0xe0
		,0xfe,0x8f,0xe7,0xff,0xff,0xff,0xff,0x7f,0xe7,0xe0
		,0xf8,0x0f,0xf7,0xff,0xff,0xff,0xfe,0xff,0xe7,0xe0
		,0xe7,0x0f,0xef,0xff,0xff,0xff,0xfe,0x7f,0xef,0xe0
		,0xdf,0xcf,0xcf,0xff,0xff,0xff,0xfe,0x7f,0xe0,0x60
		,0xdf,0xef,0x3f,0xff,0xff,0xff,0xfe,0x3f,0xc0,0x00
		,0xbf,0xfe,0x7f,0xff,0x00,0x01,0xff,0x0f,0x8f,0x00
		,0xbf,0xfe,0x3f,0xe0,0xff,0xfe,0x0f,0x8f,0xff,0x80
		,0x9f,0xff,0x1f,0x0f,0xff,0xff,0xe3,0x9f,0xff,0xc0
		,0x9f,0xf7,0x8c,0x7f,0xff,0xff,0xfc,0x7e,0x7f,0xc0
		,0x8f,0xf3,0xc3,0xff,0xff,0xff,0xff,0x18,0x7f,0xa0
		,0xc3,0xe1,0xcf,0xff,0xff,0xff,0xff,0xc2,0x3f,0xa0
		,0xe0,0x1c,0x1f,0xff,0xff,0xff,0xff,0xf3,0x0e,0x60
		,0xf8,0x3c,0x7f,0xff,0xff,0xff,0xff,0xf9,0x80,0xe0
		,0xff,0xfc,0xff,0xff,0xff,0xff,0xff,0xfe,0xc3,0xe0
		,0xff,0xf9,0xff,0xff,0xff,0xff,0xff,0xff,0x7f,0xe0
		,0xff,0xf7,0xff,0xff,0xff,0xff,0xff,0xff,0xbf,0xe0
		,0xff,0xef,0xff,0xff,0xff,0xff,0xff,0xff,0x9f,0xe0
		,0xff,0xcf,0xff,0xff,0xff,0xff,0xff,0xff,0xcf,0xe0
		,0xff,0x9f,0xff,0xff,0xff,0xff,0xff,0xff,0xef,0xe0
		,0xff,0xbf,0xff,0xff,0xff,0xff,0xff,0xff,0xe7,0xe0
		,0xff,0x3f,0xfe,0x00,0xff,0xff,0xff,0xff,0xf7,0xe0
		,0xff,0x7f,0xf8,0x00,0x3f,0xff,0xff,0xff,0xf3,0xe0
		,0xfe,0x7f,0xf0,0x00,0x1f,0xff,0xff,0xff,0xfb,0xe0
		,0xfe,0xff,0xe0,0x00,0x1f,0xff,0xff,0xff,0xfb,0xe0
		,0xfe,0xff,0xc0,0x00,0x0f,0xff,0xff,0xff,0xfb,0xe0
		,0xfc,0xff,0x80,0x00,0x0f,0xfc,0x7f,0xff,0xf9,0xe0
		,0xfc,0xff,0x80,0x00,0x07,0xf8,0x0f,0xff,0xf9,0xe0
		,0xfd,0xff,0x80,0x00,0x07,0xe0,0x07,0xff,0xf9,0xe0
		,0xfd,0xff,0x00,0x00,0x07,0xe0,0x03,0xff,0xf9,0xe0
		,0xfd,0xff,0x00,0x00,0x07,0xc0,0x01,0xff,0xfb,0xe0
		,0xfd,0xff,0x00,0x00,0x07,0xc0,0x01,0xff,0xfb,0xe0
		,0xfc,0xff,0x80,0x00,0x07,0x80,0x00,0xff,0xfb,0xe0
		,0xfe,0xff,0x80,0x00,0x0f,0x80,0x00,0xff,0xf3,0xe0
		,0xfe,0xff,0xc0,0x00,0x0f,0xc0,0x00,0xff,0xf7,0xe0
		,0xfe,0x7f,0xc0,0x00,0x1f,0xc0,0x01,0xff,0xe7,0xe0
		,0xff,0x7f,0xe0,0x00,0x1f,0xc0,0x01,0xff,0xef,0xe0
		,0xff,0x3f,0xf0,0x00,0x3f,0xe0,0x03,0xff,0xcf,0xe0
		,0xff,0xbf,0xf8,0x00,0x7f,0xf0,0x07,0xff,0xdf,0xe0
		,0xff,0x9f,0xfc,0x01,0xf8,0xfc,0x1f,0xff,0xbf,0xe0
		,0xff,0xcf,0xff,0xff,0xf0,0x7f,0xff,0xff,0x3f,0xe0
		,0xff,0xe7,0xff,0xff,0xe0,0x3f,0xff,0xfe,0x7f,0xe0
		,0xff,0xf3,0xff,0xff,0xc6,0x3f,0xff,0xfc,0xff,0xe0
		,0xf8,0x39,0xff,0xff,0xff,0xff,0xff,0xf3,0x81,0xe0
		,0xe0,0x1c,0xff,0xff,0xff,0xff,0xff,0xe3,0x00,0x60
		,0xcf,0x1e,0x3f,0xff,0xff,0xff,0xff,0x81,0x7c,0x20
		,0xbf,0x89,0x9f,0xff,0xff,0xff,0xff,0x18,0xff,0x20
		,0xbf,0xc7,0xe3,0xff,0xff,0xff,0xf8,0x1d,0xff,0x00
		,0x7f,0xcf,0xc8,0xff,0xff,0xff,0xe3,0x8f,0xff,0x80
		,0x7f,0xff,0x1e,0x7f,0xbf,0x9f,0xef,0xc7,0xff,0x80
		,0x3f,0xfe,0x3e,0x7f,0xbf,0xdf,0xef,0xc7,0xff,0xa0
		,0x0c,0x3e,0x0e,0x7f,0xbf,0xdf,0xe7,0x8f,0x7f,0xa0
		,0x80,0x7f,0x8e,0xff,0xbf,0xdf,0xf7,0x3e,0x3f,0xe0
		,0xfe,0xff,0xce,0xff,0xbf,0xdf,0xf6,0xfe,0x08,0x60
		,0xfe,0xff,0xee,0xff,0x3f,0xcf,0xf6,0xff,0x00,0xe0
		,0xfc,0xff,0xec,0xff,0x3f,0xcf,0xf2,0x7f,0x37,0xe0
		,0xfc,0xff,0xec,0xff,0x3f,0xef,0xfa,0x7f,0x3f,0xe0
		,0xfe,0x7f,0xdd,0xff,0x3f,0xef,0xfa,0x3f,0xbf,0xe0
		,0xfe,0x3f,0xbc,0x00,0x00,0x00,0x03,0x0f,0x7f,0xe0
		,0xff,0x00,0x7f,0xff,0xff,0xff,0xff,0x80,0x7f,0xe0
		,0xff,0xc1,0xff,0xff,0xff,0xff,0xff,0xe0,0xff,0xe0
};

const unsigned char normal_result[] = {
		0xff,0xff,0xff,0xfe,0x00,0x0f,0xff,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xc0,0x00,0x00,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xfe,0x00,0x00,0x00,0x0f,0xff,0xff,0xe0
		,0xff,0xff,0xf8,0x00,0x00,0x00,0x03,0xff,0xff,0xe0
		,0xff,0xff,0xe0,0x01,0xff,0xf0,0x00,0xff,0xff,0xe0
		,0xff,0xff,0x80,0x1f,0xff,0xff,0x00,0x3f,0xff,0xe0
		,0xff,0xfe,0x00,0xff,0xff,0xff,0xe0,0x0f,0xff,0xe0
		,0xff,0xfc,0x03,0xff,0xff,0xff,0xf8,0x07,0xff,0xe0
		,0xff,0xf0,0x0f,0xff,0xff,0xff,0xfe,0x01,0xff,0xe0
		,0xff,0xe0,0x3f,0xff,0xff,0xff,0xff,0x80,0xff,0xe0
		,0xff,0xc0,0xff,0xff,0xff,0xff,0xff,0xe0,0x7f,0xe0
		,0xff,0x81,0xff,0xff,0xff,0xff,0xff,0xf0,0x3f,0xe0
		,0xff,0x03,0xff,0xff,0xff,0xff,0xff,0xf8,0x1f,0xe0
		,0xfe,0x07,0xff,0xff,0xff,0xff,0xff,0xfc,0x0f,0xe0
		,0xfc,0x0f,0xff,0xff,0xff,0xff,0xff,0xfe,0x07,0xe0
		,0xfc,0x1f,0xff,0xff,0xff,0xff,0xff,0xff,0x07,0xe0
		,0xf8,0x3f,0xff,0xff,0xff,0xff,0xff,0xff,0x83,0xe0
		,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xc1,0xe0
		,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xc1,0xe0
		,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xe0
		,0xe0,0xff,0xff,0xc3,0xff,0xf8,0x7f,0xff,0xe0,0xe0
		,0xc1,0xff,0xff,0x80,0xff,0xe0,0x3f,0xff,0xf0,0x60
		,0xc1,0xff,0xff,0x00,0x7f,0xc0,0x1f,0xff,0xf0,0x60
		,0xc3,0xff,0xff,0x00,0x7f,0xc0,0x1f,0xff,0xf8,0x60
		,0x83,0xff,0xfe,0x00,0x7f,0xc0,0x0f,0xff,0xf8,0x20
		,0x83,0xff,0xff,0x00,0x7f,0xc0,0x1f,0xff,0xf8,0x20
		,0x87,0xff,0xff,0x00,0xff,0xe0,0x1f,0xff,0xfc,0x20
		,0x07,0xff,0xff,0x80,0xff,0xe0,0x3f,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xe7,0xff,0xfc,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x07,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x00
		,0x87,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xfc,0x20
		,0x83,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xf8,0x20
		,0x83,0xff,0xf8,0x00,0x00,0x00,0x01,0xff,0xf8,0x20
		,0xc3,0xff,0xf8,0x00,0x00,0x00,0x01,0xff,0xf8,0x60
		,0xc1,0xff,0xf8,0x00,0x00,0x00,0x01,0xff,0xf0,0x60
		,0xc1,0xff,0xf8,0x00,0x00,0x00,0x01,0xff,0xf0,0x60
		,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xe0
		,0xe0,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xe0,0xe0
		,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xc1,0xe0
		,0xf0,0x7f,0xff,0xff,0xff,0xff,0xff,0xff,0xc1,0xe0
		,0xf8,0x3f,0xff,0xff,0xff,0xff,0xff,0xff,0x83,0xe0
		,0xfc,0x1f,0xff,0xff,0xff,0xff,0xff,0xff,0x07,0xe0
		,0xfc,0x0f,0xff,0xff,0xff,0xff,0xff,0xfe,0x07,0xe0
		,0xfe,0x07,0xff,0xff,0xff,0xff,0xff,0xfc,0x0f,0xe0
		,0xff,0x03,0xff,0xff,0xff,0xff,0xff,0xf8,0x1f,0xe0
		,0xff,0x81,0xff,0xff,0xff,0xff,0xff,0xf0,0x3f,0xe0
		,0xff,0xc0,0xff,0xff,0xff,0xff,0xff,0xe0,0x7f,0xe0
		,0xff,0xe0,0x3f,0xff,0xff,0xff,0xff,0x80,0xff,0xe0
		,0xff,0xf0,0x0f,0xff,0xff,0xff,0xfe,0x01,0xff,0xe0
		,0xff,0xfc,0x03,0xff,0xff,0xff,0xf8,0x07,0xff,0xe0
		,0xff,0xfe,0x00,0xff,0xff,0xff,0xe0,0x0f,0xff,0xe0
		,0xff,0xff,0x80,0x1f,0xff,0xff,0x00,0x3f,0xff,0xe0
		,0xff,0xff,0xe0,0x01,0xff,0xf0,0x00,0xff,0xff,0xe0
		,0xff,0xff,0xf8,0x00,0x00,0x00,0x03,0xff,0xff,0xe0
		,0xff,0xff,0xfe,0x00,0x00,0x00,0x0f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xc0,0x00,0x00,0x7f,0xff,0xff,0xe0
		,0xff,0xff,0xff,0xfe,0x00,0x0f,0xff,0xff,0xff,0xe0
};

/**
 * @brief This functions simplifies screen update process
 * @param  resultType: result of patient health evaluation
 */
void displayResult(const unsigned char* resultType) {

	int currentTime = HAL_GetTick();

    ssd1306_Fill(Black);
    ssd1306_DrawBitmap(25, 0, resultType, 75, 65, White);
    ssd1306_UpdateScreen();

    while(HAL_GetTick() - currentTime < 3000);
}

// Enum declaration for representing gender
enum Gender {
    M,  // Represents Male
    F   // Represents Female
};

/**
 * @brief This functions simplifies screen update process
 * @param1  gender: patient's gender (M or F)
 * @param2 age: patient's age
 * @param3 bpm: patient's bpm calculated from sensor signal
 */

void assess_Patient_Health(enum Gender gender, int age, int bpm) {

	int currentTime = HAL_GetTick();

	switch(gender){
	case M:

        //static int lastCheckTime = 0;

		char message1[50];
		char message2[50];

			sprintf(message1, "MAN. %d years old.", age);
			ssd1306_Fill(Black);
			ssd1306_SetCursor(0, 20);
			ssd1306_WriteString(message1, Font_6x8, White);
			ssd1306_UpdateScreen();

			while (HAL_GetTick() - currentTime < 3000) {}


			sprintf(message2, "BPM: %d", bpm);
			ssd1306_Fill(Black);
			ssd1306_SetCursor(20, 20);
			ssd1306_WriteString(message2, Font_11x18, White);
			ssd1306_UpdateScreen();

	        while (HAL_GetTick() - currentTime < 6000) {}

		if (age > 19 && age < 30) {
			if (bpm >= MIN_BPM_THRESHOLD) {
				displayResult(bad_result);
			} else if (bpm <= MAX_BPM_THRESHOLD) {
				displayResult(excellent_result);
			} else if (bpm > 69 && bpm < 85){
				displayResult(normal_result);
			} else if (bpm > 61 && bpm < 69){
				displayResult(good_result);
			}
		} else if (age > 29 && age < 40) {
			if (bpm >= MIN_BPM_THRESHOLD) {
				displayResult(bad_result);
			} else if (bpm <= MAX_BPM_THRESHOLD + 2) {  // Adjusted threshold for this age group
				displayResult(excellent_result);
			} else if (bpm > 71 && bpm < 85){
				displayResult(normal_result);
			} else if (bpm > 63 && bpm <71){
				displayResult(good_result);
			}
		    } else if (age > 39 && age < 50) {
		    	if (bpm >= MIN_BPM_THRESHOLD + 4) {  // Adjusted threshold for this age group
		    		displayResult(bad_result);
		    	} else if (bpm <= MAX_BPM_THRESHOLD + 4) {  // Adjusted threshold for this age group
		    		displayResult(excellent_result);
		        } else if (bpm > 73 && bpm < 89){
		        	displayResult(normal_result);
		        } else if (bpm > 65 && bpm < 73){
		        	displayResult(good_result);
		        }
		    } else if (age > 50){
		    	if (bpm > 89){
		    		displayResult(bad_result);
		    	} else if (bpm < 67){
		    		displayResult(excellent_result);
		    	} else if (bpm > 75 && bpm < 89){
		    		displayResult(normal_result);
		    	} else if (bpm > 67 && bpm < 75){
		    		displayResult(good_result);
		    	}
		    } else {
		        ssd1306_Fill(Black);
		        ssd1306_SetCursor(0, 0);
		        ssd1306_WriteString("WAITING...", Font_11x18, White);
		        ssd1306_UpdateScreen();
		    }
		break;

	case F:
			char message3[50];
			char message4[50];

			sprintf(message3, "WOMAN. %d years old.", age);
			ssd1306_Fill(Black);
			ssd1306_SetCursor(0, 20);
			ssd1306_WriteString(message3, Font_6x8, White);
			ssd1306_UpdateScreen();

			while (HAL_GetTick() - currentTime < 3000) {};

			sprintf(message4, "BPM: %d", bpm);
			ssd1306_Fill(Black);
			ssd1306_SetCursor(20, 20);
			ssd1306_WriteString(message4, Font_11x18, White);
			ssd1306_UpdateScreen();

			while (HAL_GetTick() - currentTime < 6000) {}

			if (age > 19 && age < 30) {
				if (bpm >= MIN_BPM_THRESHOLD_0) {
					displayResult(bad_result);
				} else if (bpm <= MAX_BPM_THRESHOLD_0) {
					displayResult(excellent_result);
				} else if (bpm>77 && bpm <95){
					displayResult(normal_result);
				} else if (bpm>71 && bpm <77){
					displayResult(good_result);
				}
			} else if (age > 29 && age < 40) {
				if (bpm >= MIN_BPM_THRESHOLD_0+2) {
					displayResult(bad_result);
				} else if (bpm <= MAX_BPM_THRESHOLD_0) {  // Adjusted threshold for this age group
					displayResult(excellent_result);
				} else if (bpm>79 && bpm <97){
					displayResult(normal_result);
				} else if (bpm>71 && bpm <79){
					displayResult(good_result);
				}
			} else if (age > 39 && age < 50) {
				if (bpm >= MIN_BPM_THRESHOLD_0 + 4) {  // Adjusted threshold for this age group
					displayResult(bad_result);
				} else if (bpm <= MAX_BPM_THRESHOLD_0 + 2) {  // Adjusted threshold for this age group
					displayResult(excellent_result);
				} else if (bpm>79 && bpm <99){
					displayResult(normal_result);
				} else if (bpm>73 && bpm <79){
					displayResult(good_result);
				}
			} else if (age >50)	 {
				if (bpm > 103) {
					displayResult(bad_result);
				} else if (bpm < 74){
					displayResult(excellent_result);
				} else if (bpm > 83 && bpm < 103){
					displayResult(normal_result);
				} else if (bpm>75 && bpm <83){
					displayResult(good_result);
				}
			} else {
				ssd1306_Fill(Black);
			    ssd1306_SetCursor(0, 0);
			    ssd1306_WriteString("WAITING...", Font_11x18, White);
			    ssd1306_UpdateScreen();
			    }
			break;
	}

}

